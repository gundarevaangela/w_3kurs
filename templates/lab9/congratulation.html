{% extends "base.html" %}

{% block lab %}–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ{% endblock %}

{% block main %}
<style>
    body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        font-family: 'Arial', sans-serif;
    }
    
    .congratulation-wrapper {
        width: 100%;
        min-height: 100vh;
        background-image: url('/static/lab9/bg.jpg');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        background-repeat: no-repeat;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }
    
    .congratulation-content {
        max-width: 900px;
        width: 90%;
        text-align: center;
        background: rgba(255, 255, 255, 0.95);
        padding: 40px;
        border-radius: 25px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
        border: 5px solid #ffafc5;
        backdrop-filter: blur(10px);
    }
    
    .congratulation-header {
        color: #c2185b;
        font-size: 2.8em;
        margin-bottom: 30px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        background: linear-gradient(135deg, #ffe4ec 0%, #ffd1dc 100%);
        padding: 20px;
        border-radius: 15px;
        border: 3px solid #ffc2d6;
    }
    
    .gift-type {
        font-size: 1.2em;
        color: #d63384;
        margin: 10px 0 20px;
        font-weight: bold;
    }
    
    .special-badge {
        background: linear-gradient(135deg, #ffd700 0%, #ff9800 100%);
        color: #8b4513;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        margin-left: 10px;
    }
    
    .congratulation-image {
        max-width: 100%;
        max-height: 450px;
        border-radius: 20px;
        margin: 25px 0;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        border: 5px solid #ffd6e7;
        background: white;
        padding: 10px;
    }
    
    .message-box {
        background: linear-gradient(135deg, #fff0f5 0%, #ffe4e6 100%);
        padding: 30px;
        border-radius: 20px;
        margin: 30px 0;
        border: 3px solid #ffc2d6;
        font-size: 22px;
        line-height: 1.7;
        color: #880e4f;
        font-weight: 500;
        box-shadow: 0 5px 15px rgba(214, 51, 132, 0.1);
    }
    
    .progress-info {
        margin: 25px 0;
        font-size: 18px;
        color: #666;
        background: rgba(255, 255, 255, 0.9);
        padding: 15px;
        border-radius: 10px;
        display: inline-block;
        border: 2px solid #ffafc5;
    }
    
    .back-button {
        display: inline-block;
        margin-top: 20px;
        padding: 18px 45px;
        background: linear-gradient(135deg, #ff4d94 0%, #d63384 100%);
        color: white;
        text-decoration: none;
        border-radius: 35px;
        font-size: 20px;
        font-weight: bold;
        transition: all 0.3s ease;
        box-shadow: 0 6px 20px rgba(214, 51, 132, 0.4);
        border: 3px solid white;
    }
    
    .back-button:hover {
        background: linear-gradient(135deg, #ff6fa9 0%, #e91e63 100%);
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(214, 51, 132, 0.5);
    }
    
    .new-year-decoration {
        font-size: 40px;
        margin: 0 10px;
    }
    
    .gift-number {
        font-size: 24px;
        color: #c2185b;
        font-weight: bold;
        margin-top: 10px;
    }
</style>

<div class="congratulation-wrapper">
    <div class="congratulation-content">
        <div class="congratulation-header">
            <span class="new-year-decoration">üéÅ</span>
            –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –ü–æ–¥–∞—Ä–æ–∫ {{ box_id }}!
            <span class="new-year-decoration">üéÑ</span>
        </div>
        
        <div class="gift-type">
            {% if box_id >= 8 %}
            <span class="special-badge">üåü –û–°–û–ë–´–ô –ü–û–î–ê–†–û–ö</span>
            {% endif %}
        </div>
        
        <div>
            <img src="{{ img_path }}" 
                 class="congratulation-image" 
                 alt="–ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ">
        </div>
        
        <div class="message-box">
            {{ message }}
        </div>
        
        <div class="progress-info">
            <strong>–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å:</strong><br>
            üì¶ –û—Ç–∫—Ä—ã—Ç–æ –ø–æ–¥–∞—Ä–∫–æ–≤: <strong>{{ opened_count }}/3</strong><br>
            üéÅ –û—Å—Ç–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å: <strong>{{ remaining }}</strong>
            {% if not is_authenticated and box_id < 8 %}
            <br><br>
            üîì <a href="/lab8/register/" style="color: #d63384; text-decoration: underline;">
                –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –æ—Å–æ–±—ã–µ –ø–æ–¥–∞—Ä–∫–∏!
            </a>
            {% endif %}
        </div>
        
        <a href="/lab9/" class="back-button">
            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–¥–∞—Ä–∫–∞–º
        </a>
    </div>
</div>
{% endblock %}