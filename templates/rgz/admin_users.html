{% extends "rgz/base.html" %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto; padding: 20px;">
    <h1 style="color: #d63384; margin-bottom: 25px;">Управление пользователями</h1>
    
    <div style="margin-bottom: 25px; padding: 15px; background: #fff9fb; border-radius: 10px; border: 2px solid #ffccdd;">
        <p style="color: #8a2d5e; margin: 0;">
            <strong>Администратор:</strong> Вы можете удалять пользователей и управлять правами доступа.
        </p>
    </div>
    
    {% if users %}
        <div style="background: white; border: 2px solid #ffccdd; border-radius: 10px; overflow: hidden;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: linear-gradient(135deg, #ff66b2 0%, #ff3385 100%); color: white;">
                        <th style="padding: 15px; text-align: left;">ID</th>
                        <th style="padding: 15px; text-align: left;">Логин</th>
                        <th style="padding: 15px; text-align: left;">Админ</th>
                        <th style="padding: 15px; text-align: left;">Действия</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                        <tr style="border-bottom: 1px solid #ffccdd; {% if loop.index % 2 == 0 %}background: #fff9fb;{% endif %}">
                            <td style="padding: 15px; color: #8a2d5e;">{{ user.id }}</td>
                            <td style="padding: 15px; color: #d63384; font-weight: 500;">{{ user.login }}</td>
                            <td style="padding: 15px;">
                                {% if user.is_admin %}
                                    <span style="color: #ff3385; font-weight: 500;">Да</span>
                                {% else %}
                                    <span style="color: #cc6699;">Нет</span>
                                {% endif %}
                            </td>
                            <td style="padding: 15px;">
                                {% if user.id != current_user.id %}
                                    <form method="POST" action="{{ url_for('rgz.admin_delete_user', id=user.id) }}" 
                                          onsubmit="return confirm('Удалить пользователя {{ user.login }}? Все его инициативы также будут удалены.')"
                                          style="display: inline;">
                                        <button type="submit" style="padding: 6px 12px; 
                                                background: #ff6666; color: white; border: none; border-radius: 5px; 
                                                cursor: pointer; font-weight: 500;">
                                            Удалить
                                        </button>
                                    </form>
                                {% else %}
                                    <span style="color: #cc6699;">Это вы</span>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div style="text-align: center; margin: 50px 0; padding: 40px; 
             background: white; border-radius: 15px; border: 2px dashed #ffccdd;">
            <p style="color: #cc6699; font-size: 1.1em;">
                Пользователей пока нет.
            </p>
        </div>
    {% endif %}
    
    <div style="margin-top: 30px; display: flex; gap: 15px;">
        <a href="{{ url_for('rgz.admin_initiatives') }}" style="padding: 10px 20px; 
           background: #ff99cc; color: white; text-decoration: none; border-radius: 5px; font-weight: 500;">
            Управление инициативами
        </a>
        
        <a href="/rgz/" style="padding: 10px 20px; 
           background: white; color: #ff66b2; text-decoration: none; border-radius: 5px; 
           border: 2px solid #ff99cc; font-weight: 500;">
            На главную
        </a>
    </div>
</div>
{% endblock %}