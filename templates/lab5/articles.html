{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 5{% endblock %}

{% block main %}
    <div class="articles-container">
        <h1>–ú–æ–∏ —Å—Ç–∞—Ç—å–∏</h1>
        
        {% for article in articles %}
            <div class="article-card">
                <a href="/lab5/favorite/{{ article['id'] }}"
                class="favorite-heart 
                {% if article['is_favorite'] in [1, '1', True] %}filled{% else %}empty{% endif %}">
                    {% if article['is_favorite'] in [1, '1', True] %}
                        ‚ù§Ô∏è
                    {% else %}
                        ü§ç
                    {% endif %}
                </a>

                <div class="article-header">
                    <div class="article-title-section">
                        <h2 class="article-title">
                            {{ article['title'] }}
                        </h2>
                        <div class="article-badges">
                            {% if article['is_favorite'] in [1, '1', True] %}
                                <span class="badge favorite-badge">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                            {% endif %}
                            {% if article['is_public'] in [1, '1', True] %}
                                <span class="badge public-badge">–ü—É–±–ª–∏—á–Ω–∞—è</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="article-actions">
                        <a href="/lab5/article/{{ article['id'] }}/edit" class="edit-btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                        <form action="/lab5/article/{{ article['id'] }}/delete" method="post" style="display:inline;">
                            <button type="submit" class="delete-btn" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å—Ç–∞—Ç—å—é?')">
                                üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                            </button>
                        </form>
                    </div>
                </div>
                <div class="article-content">
                    <p class="article-text">{{ article['article_text'] }}</p>
                </div>
            </div>
        {% endfor %}
        
        {% if not articles %}
            <div class="no-articles">
                <p>–ü–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π</p>
                <a href="/lab5/create" class="create-btn">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é —Å—Ç–∞—Ç—å—é</a>
            </div>
        {% endif %}
        
        <div class="back-link">
            <a href="/lab5" class="back-btn">‚Üê –ù–∞–∑–∞–¥</a>
        </div>
    </div>

    <style>
        .articles-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            color: #ff1493;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(255, 105, 180, 0.2);
        }

        .article-card {
            background: linear-gradient(135deg, #ffd6e7, #ffb6c1);
            border: 2px solid #ff69b4;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.3);
            position: relative;
            transition: all 0.3s ease;
        }

        .article-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(255, 105, 180, 0.4);
        }

        .favorite-heart {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 28px;
            text-decoration: none;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .favorite-heart.empty {
            color: #ffb6c1;
            border: 2px solid #ffb6c1;
        }

        .favorite-heart.filled {
            color: #ff1493;
            border: 2px solid #ff1493;
            background: rgba(255, 20, 147, 0.1);
        }

        .favorite-heart:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 6px 18px rgba(255, 20, 147, 0.3);
        }

        .favorite-heart.filled:hover {
            background: rgba(255, 20, 147, 0.2);
        }

        .article-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            margin-right: 50px; /* –î–ª—è —Å–µ—Ä–¥–µ—á–∫–∞ */
        }

        .article-title-section {
            flex: 1;
        }

        .article-title {
            color: #c71585;
            margin: 0 0 10px 0;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(199, 21, 133, 0.1);
        }

        .article-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .favorite-badge {
            background: linear-gradient(45deg, #ffeb3b, #ffd700);
            color: #b8860b;
            border: 1px solid #ffd700;
        }

        .public-badge {
            background: linear-gradient(45deg, #87ceeb, #4682b4);
            color: white;
            border: 1px solid #4682b4;
        }

        .article-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .edit-btn, .delete-btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 13px;
            transition: all 0.3s ease;
            border: 2px solid;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .edit-btn {
            background: linear-gradient(45deg, #ffebf3, #ffd1e6);
            color: #c71585;
            border-color: #ff69b4;
        }

        .edit-btn:hover {
            background: linear-gradient(45deg, #ffd1e6, #ffb6c1);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);
        }

        .delete-btn {
            background: linear-gradient(45deg, #ffe6e6, #ffcccc);
            color: #dc143c;
            border-color: #ff6b6b;
            cursor: pointer;
            font-family: inherit;
        }

        .delete-btn:hover {
            background: linear-gradient(45deg, #ffcccc, #ff9999);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
        }

        .article-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #ff99cc;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .article-text {
            color: #333;
            line-height: 1.7;
            margin: 0;
            font-size: 16px;
            white-space: pre-line;
        }

        .no-articles {
            text-align: center;
            padding: 50px;
            background: linear-gradient(135deg, #ffd6e7, #ffb6c1);
            border-radius: 20px;
            border: 2px solid #ff69b4;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.3);
        }

        .no-articles p {
            color: #c71585;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .create-btn {
            display: inline-block;
            background: linear-gradient(45deg, #ff69b4, #ff1493);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
        }

        .create-btn:hover {
            background: linear-gradient(45deg, #ff1493, #ff69b4);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.6);
        }

        .back-link {
            text-align: center;
            margin-top: 30px;
        }

        .back-btn {
            display: inline-block;
            background: linear-gradient(45deg, #ff69b4, #ff1493);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
        }

        .back-btn:hover {
            background: linear-gradient(45deg, #ff1493, #ff69b4);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.6);
        }

        main {
            min-height: 80vh;
            padding: 20px;
            background: linear-gradient(135deg, #fff5f8, #ffeef2);
        }
    </style>
{% endblock %}